<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Seller Dashboard - QuickCart</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
    :root {
      --primary:#4a6cfa;--secondary:#ff6b6b;--accent:#42b883;--dark:#2c3e50;
      --light:#f8f9fa;--gray:#6c757d;--border:#e1e5eb;
    }
    body{background:#f5f7fb;color:var(--dark);}
    .dashboard-container{display:flex;min-height:100vh;}

    /* Sidebar */
    .sidebar{width:250px;background:var(--dark);color:white;position:fixed;height:100vh;overflow-y:auto;}
    .sidebar-header{padding:20px;background:rgba(0,0,0,0.2);text-align:center;}
    .sidebar-header h1{font-size:24px;display:flex;align-items:center;justify-content:center;}
    .sidebar-header h1 i{margin-right:10px;color:var(--accent);}
    .seller-info{text-align:center;padding:15px;border-bottom:1px solid rgba(255,255,255,0.1);}
    .seller-info h3{margin-bottom:5px;}
    .seller-info p{color:#ccc;font-size:14px;}
    .sidebar-nav{padding:20px 0;}
    .nav-item{padding:12px 20px;display:flex;align-items:center;color:#ccc;text-decoration:none;transition:.3s;border-left:3px solid transparent;}
    .nav-item:hover,.nav-item.active{background:rgba(255,255,255,0.1);color:white;border-left-color:var(--accent);}
    .nav-item i{margin-right:10px;width:20px;text-align:center;}

    /* Main Content */
    .main-content{flex:1;margin-left:250px;padding:20px;}
    .header{background:white;padding:20px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;}
    .header h2{color:var(--dark);}
    .user-actions{display:flex;align-items:center;gap:15px;}
    .logout-btn{background:var(--secondary);color:white;border:none;padding:8px 15px;border-radius:5px;cursor:pointer;display:flex;align-items:center;gap:5px;}
    .back-to-store{color:var(--primary);text-decoration:none;display:flex;align-items:center;gap:5px;}

    /* Stats Grid */
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px;}
    .stat-card{background:white;padding:20px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center;}
    .stat-icon{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 15px;font-size:20px;}
    .stat-card.orders .stat-icon{background:rgba(74,108,250,0.1);color:var(--primary);}
    .stat-card.revenue .stat-icon{background:rgba(66,184,131,0.1);color:var(--accent);}
    .stat-card.products .stat-icon{background:rgba(255,107,107,0.1);color:var(--secondary);}
    .stat-card.customers .stat-icon{background:rgba(108,117,125,0.1);color:var(--gray);}
    .stat-number{font-size:24px;font-weight:600;margin-bottom:5px;}
    .stat-label{color:var(--gray);font-size:14px;}

    /* Content Sections */
    .content-section{background:white;padding:20px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:20px;}
    .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid var(--border);}
    .section-header h3{color:var(--dark);}
    .add-btn{background:var(--accent);color:white;border:none;padding:8px 15px;border-radius:5px;cursor:pointer;display:flex;align-items:center;gap:5px;}

    /* Tables */
    .data-table{width:100%;border-collapse:collapse;}
    .data-table th,.data-table td{padding:12px;text-align:left;border-bottom:1px solid var(--border);}
    .data-table th{background:var(--light);font-weight:600;}
    .status{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;}
    .status.pending{background:#fff3cd;color:#856404;}
    .status.completed{background:#d1edff;color:#004085;}
    .status.shipped{background:#d4edda;color:#155724;}
    .action-btn{padding:4px 8px;border:none;border-radius:4px;cursor:pointer;font-size:12px;margin-right:5px;}
    .edit-btn{background:var(--primary);color:white;}
    .delete-btn{background:var(--secondary);color:white;}

    /* Modal */
    .modal{display:none;position:fixed;z-index:999;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.4);justify-content:center;align-items:center;}
    .modal-content{background:white;padding:20px;border-radius:10px;width:400px;max-width:90%;}
    .modal-content h3{margin-bottom:15px;}
    .modal-content label{display:block;margin:10px 0 5px;font-size:14px;color:var(--dark);}
    .modal-content input,.modal-content select{width:100%;padding:8px;border:1px solid var(--border);border-radius:5px;}
    .modal-actions{margin-top:15px;text-align:right;}
    .modal-content button{padding:8px 15px;border:none;border-radius:5px;cursor:pointer;}
    .cancel-btn{background:#ccc;color:#333;margin-right:10px;}
    .save-btn{background:var(--accent);color:white;}

    @media(max-width:768px){
      .sidebar{width:100%;height:auto;position:relative;}
      .main-content{margin-left:0;}
      .dashboard-container{flex-direction:column;}
      .stats-grid{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h1><i class="fas fa-store"></i> Seller Center</h1>
      </div>
      <div class="seller-info">
        <h3 id="sellerName">Seller Name</h3>
        <p id="businessName">Business Name</p>
      </div>
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
        <a href="#" class="nav-item"><i class="fas fa-box"></i> Products</a>
        <a href="#" class="nav-item"><i class="fas fa-shopping-cart"></i> Orders</a>
        <a href="#" class="nav-item"><i class="fas fa-chart-bar"></i> Analytics</a>
        <a href="#" class="nav-item"><i class="fas fa-users"></i> Customers</a>
        <a href="#" class="nav-item"><i class="fas fa-cog"></i> Settings</a>
      </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="header">
        <h2>Seller Dashboard</h2>
        <div class="user-actions">
          <a href="add to cart.html" class="back-to-store">
            <i class="fas fa-store"></i> Visit Store
          </a>
          <button class="logout-btn" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Logout
          </button>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card orders">
          <div class="stat-icon"><i class="fas fa-shopping-cart"></i></div>
          <div class="stat-number">0</div>
          <div class="stat-label">New Orders</div>
        </div>
        <div class="stat-card revenue">
          <div class="stat-icon"><i class="fas fa-rupee-sign"></i></div>
          <div class="stat-number">₹0</div>
          <div class="stat-label">Total Revenue</div>
        </div>
        <div class="stat-card products">
          <div class="stat-icon"><i class="fas fa-box"></i></div>
          <div class="stat-number">0</div>
          <div class="stat-label">Products</div>
        </div>
        <div class="stat-card customers">
          <div class="stat-icon"><i class="fas fa-users"></i></div>
          <div class="stat-number">0</div>
          <div class="stat-label">Customers</div>
        </div>
      </div>

      <!-- Recent Orders -->
      <div class="content-section">
        <div class="section-header">
          <h3>Recent Orders</h3>
          <button class="add-btn">
            <i class="fas fa-plus"></i> View All
          </button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Order ID</th><th>Customer</th><th>Amount</th><th>Status</th><th>Date</th><th>Actions</th>
            </tr>
          </thead>
          <tbody id="ordersTableBody"></tbody>
        </table>
      </div>

      <!-- Product Management -->
      <div class="content-section">
        <div class="section-header">
          <h3>Product Management</h3>
          <button class="add-btn">
            <i class="fas fa-plus"></i> Add Product
          </button>
        </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>Product</th><th>Price</th><th>Stock</th><th>Sales</th><th>Status</th><th>Actions</th>
            </tr>
          </thead>
          <tbody id="productsTableBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Add/Edit Product Modal -->
  <div class="modal" id="addProductModal">
    <div class="modal-content">
      <h3 id="modalTitle">Add New Product</h3>
      <form id="addProductForm">
        <input type="hidden" id="editingIndex" value="">
        <label>Product Name</label>
        <input type="text" id="newProductName" required>
        <label>Price (₹)</label>
        <input type="number" id="newProductPrice" required>
        <label>Stock</label>
        <input type="number" id="newProductStock" required>
        <label>Sales</label>
        <input type="number" id="newProductSales" required>
        <div class="modal-actions">
          <button type="button" class="cancel-btn" onclick="closeModal()">Cancel</button>
          <button type="submit" class="save-btn">Save</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Order Details Modal -->
  <div class="modal" id="viewOrderModal">
    <div class="modal-content">
      <h3>Order Details</h3>
      <div id="orderDetailsContent"></div>
      <label for="orderStatusSelect">Change Status:</label>
      <select id="orderStatusSelect">
        <option value="pending">Pending</option>
        <option value="shipped">Shipped</option>
        <option value="completed">Completed</option>
      </select>
      <input type="hidden" id="currentOrderIndex">
      <div class="modal-actions" style="margin-top:15px;text-align:right;">
        <button type="button" class="cancel-btn" onclick="closeOrderModal()">Close</button>
        <button type="button" class="save-btn" onclick="saveOrderStatus()">Save</button>
      </div>
    </div>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser || currentUser.role !== 'seller') {
      alert('Access denied. Please login as a seller.');
      window.location.href = 'sellerdashboard1.html';
      return;
    }
    document.getElementById('sellerName').textContent = currentUser.name;
    document.getElementById('businessName').textContent = currentUser.business || 'QuickCart Seller';

    if (!localStorage.getItem('orders')) {
      localStorage.setItem('orders', JSON.stringify([
        {id:'#ORD-001',customer:'John Doe',amount:2499,status:'pending',date:'2024-01-15'},
        {id:'#ORD-002',customer:'Jane Smith',amount:1299,status:'shipped',date:'2024-01-14'},
        {id:'#ORD-003',customer:'Mike Johnson',amount:3999,status:'completed',date:'2024-01-13'}
      ]));
    }
    if (!localStorage.getItem('products')) {
      localStorage.setItem('products', JSON.stringify([
        {name:'Wireless Headphones',price:8999,stock:45,sales:128,status:'completed'},
        {name:'Smart Watch',price:12999,stock:23,sales:89,status:'completed'},
        {name:'Running Shoes',price:5499,stock:0,sales:67,status:'pending'}
      ]));
    }
    renderDashboard();
    document.querySelectorAll('.add-btn')[1].addEventListener('click', ()=>openModalForAdd());
    document.getElementById('addProductForm').addEventListener('submit', e=>{
      e.preventDefault();
      saveProduct();
    });
  });

  function renderDashboard(){
    const orders=JSON.parse(localStorage.getItem('orders'));
    const products=JSON.parse(localStorage.getItem('products'));

    // orders table
    const ordersTbody=document.getElementById('ordersTableBody');
    ordersTbody.innerHTML='';
    orders.forEach((order,index)=>{
      ordersTbody.innerHTML+=`
        <tr>
          <td>${order.id}</td><td>${order.customer}</td><td>₹${order.amount.toLocaleString()}</td>
          <td><span class="status ${order.status}">${capitalizeStatus(order.status)}</span></td>
          <td>${order.date}</td>
          <td><button class="action-btn edit-btn" data-order-index="${index}">View</button></td>
        </tr>`;
    });
    document.querySelectorAll('button[data-order-index]').forEach(btn=>{
      btn.addEventListener('click',()=>openOrderModal(btn.getAttribute('data-order-index')));
    });

    // products table
    const productsTbody=document.getElementById('productsTableBody');
    productsTbody.innerHTML='';
    products.forEach((product,index)=>{
      productsTbody.innerHTML+=`
        <tr>
          <td>${product.name}</td><td>₹${product.price.toLocaleString()}</td><td>${product.stock}</td><td>${product.sales}</td>
          <td><span class="status ${product.status}">${product.status==='completed'?'Active':'Out of Stock'}</span></td>
          <td>
            <button class="action-btn edit-btn" data-product-index="${index}">Edit</button>
            <button class="action-btn delete-btn" data-product-index="${index}">Delete</button>
          </td>
        </tr>`;
    });
    document.querySelectorAll('.edit-btn[data-product-index]').forEach(btn=>{
      btn.addEventListener('click',()=>openModalForEdit(btn.getAttribute('data-product-index')));
    });
    document.querySelectorAll('.delete-btn').forEach(btn=>{
      btn.addEventListener('click',()=>deleteProduct(btn.getAttribute('data-product-index')));
    });

    // stats
    document.querySelector('.stat-card.orders .stat-number').textContent=orders.length;
    const totalRevenue=orders.reduce((s,o)=>s+o.amount,0);
    document.querySelector('.stat-card.revenue .stat-number').textContent='₹'+totalRevenue.toLocaleString();
    document.querySelector('.stat-card.products .stat-number').textContent=products.length;
    // unique customers count
    const uniqueCustomers=new Set(orders.map(o=>o.customer));
    document.querySelector('.stat-card.customers .stat-number').textContent=uniqueCustomers.size;
  }

  // product modal
  function openModalForAdd(){
    document.getElementById('modalTitle').textContent='Add New Product';
    document.getElementById('editingIndex').value='';
    document.getElementById('addProductForm').reset();
    document.getElementById('addProductModal').style.display='flex';
  }
  function openModalForEdit(index){
    const products=JSON.parse(localStorage.getItem('products'));
    const product=products[index];
    document.getElementById('modalTitle').textContent='Edit Product';
    document.getElementById('editingIndex').value=index;
    document.getElementById('newProductName').value=product.name;
    document.getElementById('newProductPrice').value=product.price;
    document.getElementById('newProductStock').value=product.stock;
    document.getElementById('newProductSales').value=product.sales;
    document.getElementById('addProductModal').style.display='flex';
  }
  function saveProduct(){
    const index=document.getElementById('editingIndex').value;
    const name=document.getElementById('newProductName').value;
    const price=parseFloat(document.getElementById('newProductPrice').value);
    const stock=parseInt(document.getElementById('newProductStock').value);
    const sales=parseInt(document.getElementById('newProductSales').value);
    const products=JSON.parse(localStorage.getItem('products'));
    if(index===''){products.push({name,price,stock,sales,status:stock>0?'completed':'pending'});}
    else{products[index]={name,price,stock,sales,status:stock>0?'completed':'pending'};}
    localStorage.setItem('products',JSON.stringify(products));
    closeModal();renderDashboard();
  }
  function closeModal(){document.getElementById('addProductModal').style.display='none';}
  function deleteProduct(index){
    const products=JSON.parse(localStorage.getItem('products'));
    if(confirm('Are you sure you want to delete this product?')){
      products.splice(index,1);
      localStorage.setItem('products',JSON.stringify(products));
      renderDashboard();
    }
  }

  // order modal with status
  function openOrderModal(index){
    const orders=JSON.parse(localStorage.getItem('orders'));
    const order=orders[index];
    document.getElementById('currentOrderIndex').value=index;
    const html=`
      <p><strong>Order ID:</strong> ${order.id}</p>
      <p><strong>Customer:</strong> ${order.customer}</p>
      <p><strong>Amount:</strong> ₹${order.amount.toLocaleString()}</p>
      <p><strong>Date:</strong> ${order.date}</p>
    `;
    document.getElementById('orderDetailsContent').innerHTML=html;
    document.getElementById('orderStatusSelect').value=order.status;
    document.getElementById('viewOrderModal').style.display='flex';
  }
  function closeOrderModal(){document.getElementById('viewOrderModal').style.display='none';}
  function saveOrderStatus(){
    const idx=document.getElementById('currentOrderIndex').value;
    const newStatus=document.getElementById('orderStatusSelect').value;
    const orders=JSON.parse(localStorage.getItem('orders'));
    orders[idx].status=newStatus;
    localStorage.setItem('orders',JSON.stringify(orders));
    closeOrderModal();
    renderDashboard();
  }

  function logout(){localStorage.removeItem('currentUser');window.location.href='add to cart.html';}
  function capitalizeStatus(status){return status.charAt(0).toUpperCase()+status.slice(1);}
  </script>
</body>
</html>
